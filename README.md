# Exp_robotics_lab Assignment2
## INTROCUCTION
Purpose of this repository is to develop the assignment 2 of Experimental Robotics Laboratory. In this assignment robot moves between four position and oracle position in the gazebo simulation. There are markers in that four position, whenever robot place the cluedo link of its arm, the hint is generated. The generated hint is checked for consistency and complete hypothesis. If it is a complete and consistent hypothesis robot moves to the oracle position to check for the solution. If the solution is correct the game ends or otherwise it go to the other points to collect hints.

## SOFTWARE ARCHITECTURE
In order to better understand the software architecture we can utilise the UML component diagram

![CLUEDO_SIM](https://user-images.githubusercontent.com/82164428/220006145-f78bf9fe-5464-4f06-bde2-0c75e81ae07f.jpg)

The ontology_interface node which receives the solution and hint from the simulation node. The simulation node. Reset planner is the node which gives all the information to the ROSplan kowledge with the help of planner class about the PDDL problem. ROSplan with the aid of PDDL generate a plan and dispatch the plan to the action interface. 

The actions which are defined in the domain of PDDL are go_to_waypoint, movearm, update_ontology and check_consistency. go_to_waypoint sends the goal to reach to the go_to_point node(i.e marker coordinates posistion in the map). go_to_point moves the robot from intial to the goal position. Once it reaches the goal the move_arm node is initiated to move the robotic arm to the marker position.

Ontology_interface update the hints to the ontology when update_request node request. Ontology perform consistency check when the check_consistency node request. With the help of Armor service all the ontology operations are performed with the help of myArmor class. When the solution is found ontology_interface sends the true message to reset planner to stop. Go to point sends and receives the velocity and odometry from gazebo respectively. 

Now to the ros workspace, there are two directories in the workspace, one is a moveit config generated by move it setup assistant and the erl2 directories contains all the necessaty things to simulate and run the simulation.

### Moveit_cofig:
Has all the configuration files generated by the moveit setup assistant. And the troubleshooting steps are performed in order to run the simulation and the pacakges. Only to position are defined in the assistant, one is the initial normal position and the other one is to reach the marker position which is target position.

### erl2:

### Scripts:
### Ontology.py:
   This node recieves the hint from the /oracle_hint service and add them. And it checks the received hint is whether consistent and complete. When the recieved solution is consistent and complete it checks with the solution ID from the /oracle_solution service otherwise removes them from the onotology. If the solution is correct it tries to finish the game or else it sends the resetrequest with the false parameter. And also peforms query operation based on the request. 

### go_to_point.py:
    This node implement the movement of the robot as well orient itself to the goal postion. Based on the goal received from the gotowaypoint node via ActionGoal the robot aligns to the direction set the desired velocity and move towards the target and reach the target postion. 

### reset_planner.py:
   This is the node which calls the rosplan_knowledge_base service with the palanner class methods. And it checks the solution whether the solution is concluded or not with the /reset_planning message. Based on the solution is correct or not the problem is defined again and the process continues.


 ### myArmor class:
 This is the class method to communicate with the Armor service. It is based on the message format to be communicated with the Armor service.
 
 ### plaber class:
 THis is the class to communicate with the ROSplan.
 
 ### src
 ### init.cpp
 Move the robotic arm to the initial postion defined in the move it.
 
 ### checkconsistency.cpp 
 This node implements the ROSPlan CheckConsistencyActionInterface: the corresponding behaviour for the check_consistency action in the PDDl file
 
 ### gotoWaypoint.cpp
 This node implements the ROSPlan GoToWaypointActionInterface: the corresponding behaviour for the go_to_waypoint action in the PDDl file.
 
 ### movearm.cpp
 This node implements the ROSPlan MovearmActionInterface: the corresponding behaviour for the movearm action in the PDDl file.
 
 ### update_ontology.cpp
 This node implements the ROSPlan UpdateOntologyActionInterface: the corresponding behaviour for the update_ontology action in the PDDl file.
 
 ### simulation.cpp
 Node for generating the hints when a marker is reached with the arm.
 
 
 
